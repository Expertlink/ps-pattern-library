//= Options

$star-size-base: 16px !default;
$star-rating-min: 0 !default;
$star-rating-max: 5 !default;
$star-rating-step: .5 !default;

//= Images

// These are encoded as data-URIs to achieve the behavior of one-off
// background-image scaling without necessitating separate requests.
//
// See also: https://css-tricks.com/probably-dont-base64-svg/
//
// Encoded using: http://dopiaza.org/tools/datauri/

$star-base-url: 'data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0D%0A%3C%21--%20Generator%3A%20Adobe%20Illustrator%2017.1.0%2C%20SVG%20Export%20Plug-In%20.%20SVG%20Version%3A%206.00%20Build%200%29%20%20--%3E%0D%0A%3C%21DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0D%0A%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0D%0A%09%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2016%2016%22%20enable-background%3D%22new%200%200%2016%2016%22%20xml%3Aspace%3D%22preserve%22%3E%0D%0A%3Cpolygon%20fill%3D%22%23E9DED0%22%20stroke%3D%22%23E8CDC1%22%20stroke-linejoin%3D%22round%22%20points%3D%223.4%2C14.2%204.2%2C9.2%200.7%2C5.9%205.6%2C5.2%207.7%2C0.7%2010%2C5.1%20%0D%0A%0914.9%2C5.8%2011.3%2C9.2%2012.2%2C14.1%207.8%2C11.8%20%22%2F%3E%0D%0A%3C%2Fsvg%3E%0D%0A' !default;
$star-fill-url: 'data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0D%0A%3C%21--%20Generator%3A%20Adobe%20Illustrator%2017.1.0%2C%20SVG%20Export%20Plug-In%20.%20SVG%20Version%3A%206.00%20Build%200%29%20%20--%3E%0D%0A%3C%21DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0D%0A%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0D%0A%09%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2016%2016%22%20enable-background%3D%22new%200%200%2016%2016%22%20xml%3Aspace%3D%22preserve%22%3E%0D%0A%3CradialGradient%20id%3D%22SVGID_1_%22%20cx%3D%2239.587%22%20cy%3D%22198.439%22%20r%3D%2213.6985%22%20gradientTransform%3D%22matrix%280.9256%203.918997e-02%203.918997e-02%20-0.9256%20-36.8643%20196.5482%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0D%0A%09%3Cstop%20%20offset%3D%220%22%20style%3D%22stop-color%3A%23FF2817%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.1069%22%20style%3D%22stop-color%3A%23FF5737%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.2236%22%20style%3D%22stop-color%3A%23FF8255%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.3366%22%20style%3D%22stop-color%3A%23FFA46C%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.4431%22%20style%3D%22stop-color%3A%23FFBD7D%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.5776%22%20style%3D%22stop-color%3A%23FFCC87%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.8137%22%20style%3D%22stop-color%3A%23FFD18B%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%221%22%20style%3D%22stop-color%3A%23FFD60A%22%2F%3E%0D%0A%3C%2FradialGradient%3E%0D%0A%3Cpolygon%20fill%3D%22url%28%23SVGID_1_%29%22%20stroke%3D%22%23DB703C%22%20stroke-linejoin%3D%22round%22%20points%3D%223.4%2C14.2%204.2%2C9.2%200.7%2C5.9%205.6%2C5.2%207.7%2C0.7%2010%2C5.1%20%0D%0A%0914.9%2C5.8%2011.3%2C9.2%2012.2%2C14.1%207.8%2C11.8%20%22%2F%3E%0D%0A%3C%2Fsvg%3E%0D%0A' !default;
$star-edit-url: 'data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%0D%0A%3C%21--%20Generator%3A%20Adobe%20Illustrator%2018.1.1%2C%20SVG%20Export%20Plug-In%20.%20SVG%20Version%3A%206.00%20Build%200%29%20%20--%3E%0D%0A%3C%21DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%0D%0A%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0D%0A%09%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%22-7%2089%2016%2016%22%20enable-background%3D%22new%20-7%2089%2016%2016%22%20xml%3Aspace%3D%22preserve%22%3E%0D%0A%3CradialGradient%20id%3D%22SVGID_1_%22%20cx%3D%2237.1087%22%20cy%3D%2289.0663%22%20r%3D%2213.6985%22%20gradientTransform%3D%22matrix%280.9256%203.918997e-02%20-3.918997e-02%200.9256%20-30.303%2019.5305%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0D%0A%09%3Cstop%20%20offset%3D%220%22%20style%3D%22stop-color%3A%23179EFF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.1069%22%20style%3D%22stop-color%3A%2337ACFF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.2236%22%20style%3D%22stop-color%3A%2355B8FF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.3366%22%20style%3D%22stop-color%3A%236CC2FF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.4431%22%20style%3D%22stop-color%3A%237DC9FF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.5776%22%20style%3D%22stop-color%3A%2387CDFF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%220.8137%22%20style%3D%22stop-color%3A%238BCFFF%22%2F%3E%0D%0A%09%3Cstop%20%20offset%3D%221%22%20style%3D%22stop-color%3A%2347B3FF%22%2F%3E%0D%0A%3C%2FradialGradient%3E%0D%0A%3Cpolygon%20fill%3D%22url%28%23SVGID_1_%29%22%20stroke%3D%22%233D99D8%22%20stroke-linejoin%3D%22round%22%20points%3D%22-3.6%2C103.2%20-2.8%2C98.2%20-6.3%2C94.9%20-1.4%2C94.2%20%0D%0A%090.7%2C89.7%203%2C94.1%207.9%2C94.8%204.3%2C98.2%205.2%2C103.1%200.8%2C100.8%20%22%2F%3E%0D%0A%3C%2Fsvg%3E%0D%0A' !default;

//= Sizing mixin

// .stars on its own will respect the parent font-size, but you can also set
// sizes overtly if that's your jam

@mixin star-size (
  $star-size: $star-size-base,
  $relative-to: $font-size-base,
  $star-max: $star-rating-max
) {
  @if $relative-to {
    $star-size: ($star-size / $font-size-base * 1em);
  }
  height: $star-size;
  width: $star-size * $star-max;
}

//= Core component

.stars {
  display: inline-block;
  overflow: hidden;
  vertical-align: middle;
  @include star-size();
  @include user-select(none);

  &:before,
  &:after {
    background-repeat: repeat-x;
    background-size: auto 100%;
    content: '';
    display: block;
    float: left;
    height: 100%;
  }

  &:before {
    background-image: url($star-fill-url);
    background-position: left;
    width: 0;
  }

  &:after {
    background-image: url($star-base-url);
    background-position: right;
    width: 100%;
  }
}

//= Sizing

@for $i from $star-rating-min through ($star-rating-max / $star-rating-step) {
  $step: ($i * $star-rating-step);
  $step-string: str-replace('#{$step}', '.', '-');
  $step-percentage: ($step / $star-rating-max * 100%);

  .stars-#{$step-string} {
    &:before {
      width: $step-percentage;
    }

    &:after {
      width: (100% - $step-percentage);
    }
  }
}

//= Size modifiers

.stars-lg {
  @include star-size(22px);
}

.stars-xl {
  @include star-size(40px);
}


// = Editable variation

.stars-control {
  cursor: pointer;

  &.editing:before {
    background-image: url($star-edit-url);
  }
}
