$svg-sprite-url: "/{{{sprite}}}";

$svg-sprite-map: (
  {{#shapes}}
  {{name}}: (
  background-position: {{position.relative.xy}},
  width: {{width.outer}}px,
  height: {{height.outer}}px
  ){{^last}},{{/last}}
  {{/shapes}}
);

@mixin svg-sprite-reset() {
  background-image: url($svg-sprite-url);
  background-repeat: no-repeat;
}

%svg-sprite-base {
  @include svg-sprite-reset();
}

@mixin svg-sprite (
  $key: false,
  $extend: true,
  $reset: true,
  $url: $svg-sprite-url,
  $map: $svg-sprite-map
) {
  @if $extend {
    @extend %svg-sprite-base;
  } @else if $reset {
    @include svg-sprite-reset();
  }
  @if $key and map-has-key($map, $key) {
    @each $property, $value in map-get($map, $key) {
      #{$property}: $value;
    }
  }
}
