---
name: Phone (tel) Field
description: >
  Input type of `tel` with phone number masking via intl-tel-input jQuery plugin.
  The country drop-down is also generated by this same plugin, as the country codes
  need to match between each if they are connected. Changes to the country value
  will update the phone field's international country code. Country drop-down
  currently defaults to "US".
---
<form role="form">
  <div class="form-group arrange arrange-equal arrange-gutter">
    <div class="form-group form-group-required arrange-fit">
      <label class="control-label" for="signupCountry">Country</label>
      <select id="signupCountry" class="form-control">

      </select>
    </div>
  </div>
  <div class="form-group form-group-required">
    <label class="control-label" for="signupPhone">Phone number</label>
    <input type="tel" class="form-control" id="signupPhone" data-mask-type="tel" data-country-select="#signupCountry"/>
  </div>
</form>

<script>
$(function() {
  var countryData     = $.fn.intlTelInput.getCountryData(),
      countryCount    = countryData.length,
      countryOptions  = [];

  for (i = 0; i < countryCount; i++) { // Build <option>s for country select(s)
    countryOptions.push($('<option></option>')
      .attr('value', countryData[i].iso2)
      .text(countryData[i].name)
    );
  }

  $('[data-mask-type="tel"]').each(function() { // Set up phone masking
    var $el         = $(this),
    countrySelector = $el.data('country-select'),
    $country        = $(countrySelector);

    $country.append(countryOptions).val('us');  // Add <option>s and set to 'us' by default
    $country.change(function() {
      $el.intlTelInput('selectCountry', $(this).val());
    });
    $el.intlTelInput();
  });

});
</script>
